.floating-headings-container {
	user-select: none;
	font-family: var(--font-interface);
	position: absolute;
	top: 50%;
	right: var(--size-4-5);
	transform: translateY(-50%);
	z-index: var(--layer-popover);
	pointer-events: auto;
	isolation: isolate;
}

.floating-headings-container.position-left {
	left: var(--size-4-5);
	right: unset;
}

.floating-headings-collapsed {
	display: flex;
	flex-direction: column;
	align-items: flex-end;
	justify-content: space-between;
	border-radius: var(--radius-s);
	background-color: var(--background-primary);
	border: var(--border-width) solid var(--border-color);
	overflow-y: hidden;
	opacity: 0.4;
	cursor: var(--cursor-link);
	padding: var(--size-4-2) var(--size-2-1);
	transition: all var(--floating-headings-animation-duration, 150ms)
		ease-in-out;
	width: var(--floating-headings-collapsed-width, 16px);
}

.floating-headings-container.position-left .floating-headings-collapsed {
	align-items: flex-start;
}

.floating-headings-collapsed.hovered {
	opacity: 0.9;
}

.floating-headings-expanded {
	position: absolute;
	top: 50%;
	transform: translateY(-50%) scaleX(0);
	background-color: var(
		--floating-headings-panel-bg,
		var(--background-primary)
	);
	border: var(--border-width) solid var(--background-modifier-border);
	border-radius: var(--radius-m);
	overflow-y: auto;
	padding: var(--size-4-2) 0;
	opacity: 0;
	transform-origin: right center;
	transition: all var(--floating-headings-animation-duration, 150ms)
		ease-in-out;
	pointer-events: none;
	z-index: var(--layer-modal);
	width: var(--floating-headings-panel-width, 240px);
	max-height: var(--floating-headings-panel-max-height, 400px);
	right: calc(
		var(--floating-headings-collapsed-width, 16px) + var(--size-2-3)
	);
}

.floating-headings-container.position-left .floating-headings-expanded {
	left: calc(
		var(--floating-headings-collapsed-width, 16px) + var(--size-2-3)
	);
	right: unset;
	transform-origin: left center;
	transform: translateY(-50%) scaleX(0);
}

.floating-headings-expanded.visible {
	pointer-events: auto;
	opacity: 1;
	transform: translateY(-50%) scaleX(1);
}

.floating-heading-item {
	padding: var(--size-2-2) 0;
	padding-right: var(--size-4-3);
	cursor: var(--cursor-link);
	font-size: var(--font-ui-smaller);
	line-height: var(--line-height-tight);
	color: var(--text-muted);
	border-radius: var(--radius-s);
	transition: all var(--floating-headings-animation-duration, 150ms)
		ease-in-out;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.floating-heading-item:hover {
	background-color: var(--background-modifier-hover);
	color: var(--text-normal);
}

.floating-heading-item.active {
	color: var(--color-accent);
	font-weight: var(--font-semibold);
}

/* Level-based indentation and font weights */
.floating-heading-item[data-level="1"] {
	padding-left: var(--size-4-3);
	font-weight: var(--font-medium);
}
.floating-heading-item[data-level="2"] {
	padding-left: var(--size-4-6);
	font-weight: var(--font-medium);
}
.floating-heading-item[data-level="3"] {
	padding-left: var(--size-4-9);
	font-weight: var(--font-medium);
}
.floating-heading-item[data-level="4"] {
	padding-left: var(--size-4-12);
	font-weight: var(--font-normal);
}
.floating-heading-item[data-level="5"] {
	padding-left: calc(var(--size-4-12) + var(--size-4-3));
	font-weight: var(--font-normal);
}
.floating-heading-item[data-level="6"] {
	padding-left: var(--size-4-18);
	font-weight: var(--font-normal);
}

.floating-heading-line {
	height: var(--size-2-1);
	background-color: var(--floating-headings-line-color, var(--text-muted));
	margin: 0;
	border-radius: var(--radius-xs);
	transition: all var(--floating-headings-animation-duration, 150ms)
		ease-in-out;
	transform-origin: right center;
	opacity: 0.8;
	flex-shrink: 0;
}

/* Level-based line widths */
.floating-heading-line[data-level="1"] {
	width: 100%;
}
.floating-heading-line[data-level="2"] {
	width: 75%;
}
.floating-heading-line[data-level="3"] {
	width: 55%;
}
.floating-heading-line[data-level="4"] {
	width: 40%;
}
.floating-heading-line[data-level="5"] {
	width: 30%;
}
.floating-heading-line[data-level="6"] {
	width: 25%;
}

.floating-headings-container.position-left .floating-heading-line {
	transform-origin: left center;
}

.theme-light .floating-headings-collapsed {
	background-color: rgba(255, 255, 255, 0.95);
	border-color: var(--border-color);
}

.theme-light .floating-headings-expanded {
	background-color: rgba(255, 255, 255, 0.95);
}

@media (prefers-reduced-motion: reduce) {
	.floating-headings-container *,
	.floating-headings-container *::before,
	.floating-headings-container *::after {
		animation-duration: 0.01ms;
		animation-iteration-count: 1;
		transition-duration: 0.01ms;
	}
}
